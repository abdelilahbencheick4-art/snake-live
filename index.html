<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Live Mobile Pro</title>

<style>
:root{
    --bg:#0f0018;
    --panel:#1c0028;
    --accent:#00ffc3;
    --danger:#ff0055;
}

body{
    margin:0;
    background:var(--bg);
    font-family:Arial;
    display:flex;
    flex-direction:column;
    align-items:center;
}

#topBar{
    width:100%;
    padding:12px;
    text-align:center;
    background:linear-gradient(90deg,#6a00ff,#ff00cc);
    font-weight:bold;
    color:white;
    box-shadow:0 2px 10px #000;
}

canvas{
    margin-top:10px;
    background:radial-gradient(circle,#1a0025,#000);
    border:4px solid var(--accent);
    border-radius:20px;
    box-shadow:0 0 25px var(--accent);
}

#bottomPanel{
    margin-top:10px;
    background:var(--panel);
    width:95%;
    border-radius:15px;
    padding:10px;
    display:flex;
    justify-content:space-around;
    color:white;
}

.stat{
    text-align:center;
}

#giftPanel{
    margin-top:10px;
    width:95%;
    background:#140020;
    border-radius:15px;
    padding:10px;
    color:white;
}

.gift{
    display:flex;
    justify-content:space-between;
    margin:5px 0;
    font-size:14px;
}
</style>
</head>

<body>

<div id="topBar">üéÆ Snake Live Interactive</div>

<canvas id="game"></canvas>

<div id="bottomPanel">
    <div class="stat">Score<br><b id="score">0</b></div>
    <div class="stat">Length<br><b id="length">3</b></div>
    <div class="stat">Wins<br><b id="wins">0</b></div>
</div>

<div id="giftPanel">
    <b>üéÅ Live Interactions</b>
    <div class="gift">‚ù§Ô∏è Heart ‚Üí +5 Apples</div>
    <div class="gift">üç© Donut ‚Üí Bomb</div>
    <div class="gift">üìº Cassette ‚Üí Boost</div>
    <div class="gift">üë§ Follow ‚Üí Thank You</div>
</div>

<script>

const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

const GRID=25;
const SIZE=22;

canvas.width=GRID*SIZE;
canvas.height=GRID*SIZE;

let snake=[];
let apples=[];
let bombs=[];
let score=0;
let wins=0;
let snakeLength=3;
let gameOver=false;

function init(){
    snake=[{x:10,y:10},{x:9,y:10},{x:8,y:10}];
    apples=[];
    bombs=[];
    snakeLength=3;
    spawnApple(3);
}

function spawnApple(n=1){
    for(let i=0;i<n;i++){
        let pos;
        do{
            pos={x:Math.floor(Math.random()*SIZE),y:Math.floor(Math.random()*SIZE)};
        }while(collision(pos,snake)||collision(pos,bombs));
        apples.push(pos);
    }
}

function spawnBomb(){
    let pos;
    do{
        pos={x:Math.floor(Math.random()*SIZE),y:Math.floor(Math.random()*SIZE)};
    }while(collision(pos,snake)||collision(pos,apples));
    bombs.push(pos);
}

function collision(pos,array){
    return array.some(p=>p.x===pos.x && p.y===pos.y);
}

function bfs(start,target){
    let queue=[[start]];
    let visited=new Set();
    visited.add(start.x+","+start.y);

    while(queue.length){
        let path=queue.shift();
        let cur=path[path.length-1];

        if(cur.x===target.x && cur.y===target.y){
            return path[1];
        }

        let moves=[
            {x:0,y:-1},
            {x:0,y:1},
            {x:-1,y:0},
            {x:1,y:0}
        ];

        for(let m of moves){
            let next={x:cur.x+m.x,y:cur.y+m.y};
            let key=next.x+","+next.y;

            if(next.x<0||next.y<0||next.x>=SIZE||next.y>=SIZE) continue;
            if(collision(next,snake)) continue;
            if(collision(next,bombs)) continue;
            if(visited.has(key)) continue;

            visited.add(key);
            queue.push([...path,next]);
        }
    }
    return null;
}

function update(){

    if(apples.length===0){
        wins++;
        spawnApple(3);
    }

    let head=snake[0];
    let target=apples[0];
    let next=bfs(head,target);

    if(!next){
        init();
        return;
    }

    snake.unshift(next);

    if(collision(next,apples)){
        score+=10;
        snakeLength++;
        apples=apples.filter(a=>!(a.x===next.x && a.y===next.y));
        spawnApple();
    }

    if(collision(next,bombs)){
        init();
        return;
    }

    while(snake.length>snakeLength){
        snake.pop();
    }

    draw();
}

function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // grid subtle
    ctx.strokeStyle="rgba(255,255,255,0.05)";
    for(let i=0;i<=SIZE;i++){
        ctx.beginPath();
        ctx.moveTo(i*GRID,0);
        ctx.lineTo(i*GRID,canvas.height);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(0,i*GRID);
        ctx.lineTo(canvas.width,i*GRID);
        ctx.stroke();
    }

    // apples
    apples.forEach(a=>{
        ctx.shadowBlur=15;
        ctx.shadowColor="#ff3300";
        ctx.fillStyle="red";
        ctx.beginPath();
        ctx.arc(a.x*GRID+GRID/2,a.y*GRID+GRID/2,GRID/2-3,0,Math.PI*2);
        ctx.fill();
    });

    // bombs
    bombs.forEach(b=>{
        ctx.shadowBlur=10;
        ctx.shadowColor="#ffaa00";
        ctx.fillStyle="#333";
        ctx.fillRect(b.x*GRID+3,b.y*GRID+3,GRID-6,GRID-6);
    });

    // snake
    snake.forEach((s,i)=>{
        ctx.shadowBlur=8;
        ctx.shadowColor="#00ffc3";
        let grad=ctx.createLinearGradient(s.x*GRID,s.y*GRID,s.x*GRID+GRID,s.y*GRID+GRID);
        grad.addColorStop(0,"#00ffc3");
        grad.addColorStop(1,"#007a60");
        ctx.fillStyle=grad;
        ctx.beginPath();
        ctx.arc(s.x*GRID+GRID/2,s.y*GRID+GRID/2,GRID/2-2,0,Math.PI*2);
        ctx.fill();
    });

    ctx.shadowBlur=0;

    document.getElementById("score").innerText=score;
    document.getElementById("length").innerText=snakeLength;
    document.getElementById("wins").innerText=wins;
}

setInterval(update,90);

init();

</script>
</body>
</html>
